# /run-test

作成済みのテストケースを実行するコマンド。

## 使い方

```bash
/run-test [テストケースパス or カテゴリ] [オプション]
```

### 引数

| 引数 | 説明 | 例 |
|------|------|---|
| パス | 特定のテストケースファイル | tests/prompt-injection/2026-02-27-direct-injection.md |
| カテゴリ | カテゴリ内の全テストを実行 | prompt-injection |
| all | 全テストを実行 | all |

### オプション

| オプション | 説明 | デフォルト |
|-----------|------|-----------|
| --dry-run | 実行せずに手順だけ表示 | false |
| --target | テスト対象の環境 | local |

### 使用例

```bash
# 特定のテストケースを実行
/run-test tests/prompt-injection/2026-02-27-direct-injection.md

# ドライランで手順を確認
/run-test prompt-injection --dry-run

# 全テストを実行
/run-test all
```

---

# コマンド実行

$ARGUMENTS の内容を分析し、テストケースを実行します。

## 引数解析

1. テスト対象を特定（パス or カテゴリ）
2. オプションを解析

## Phase 1: テストケース読み込み

1. 指定されたテストケースファイルを読み込み
2. カテゴリ指定の場合は `tests/{category}/` 内の全ファイルをリスト
3. `status: ready` のテストケースのみ対象

## Phase 2: テスト実行

### --dry-run の場合
テスト手順をユーザーに表示し、実行しない。

### 通常実行の場合

各テストケースについて：
1. 前提条件を確認
2. テスト手順に従って実行
3. 判定基準に基づいて結果を判定
4. テストケースファイルの「実行結果」セクションを更新

**注意**: 実際のOpenClaw環境への攻撃テストは、ユーザーの確認を得てから実行する。

## Phase 3: 結果記録

1. テストケースファイルの status を更新（passed / failed）
2. 実行結果セクションに詳細を記録

## Phase 4: レポート生成

1. テスト結果のサマリーを `reports/{YYYY-MM-DD}-test-results.md` に保存
2. FAIL したテストケースをハイライト
3. 対策提案を一覧表示

## Phase 5: ユーザーへの提示

1. 全体の結果サマリー（PASS/FAIL の数）
2. 重要な発見事項
3. 推奨アクション
