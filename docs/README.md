# OpenClaw Security Knowledge Base

## OpenClawを安全に使うために

[OpenClaw](https://github.com/openclaw/openclaw) は23万スターを超える大人気のオープンソースAIアシスタントです。WhatsApp、Telegram、Discord、Slackなど様々なチャンネルでAIボットを動かせる強力なツールですが、**その強力さゆえにセキュリティリスクも大きい**のが現状です。

### 何が問題なのか？

OpenClawは「致命的な三つ組（Lethal Trifecta）」と呼ばれる3条件を全て満たしています：

```
1. プライベートデータにアクセスできる（APIキー、会話履歴）
2. 信頼できない外部データを処理する（メッセージ、URL、ファイル）
3. 外部と通信できる（マルチチャンネル、Webhook、ブラウザ操作）
```

実際にOpenClawには**160件以上のセキュリティアドバイザリ**が公開されており、サンドボックスはデフォルトで無効、プロンプトインジェクション対策は未実装など、改善の余地が多くあります。

---

## このナレッジベースの目的

**「攻撃を知ることで、防御を強くする」** というアプローチで、OpenClawのセキュリティを改善します。

### 3つの柱

```
        調べる                  試す                   守る
   ┌──────────────┐     ┌──────────────┐     ┌──────────────┐
   │  脆弱性事例  │     │  攻撃テスト  │     │  ベスト      │
   │  の調査      │ ──→ │  ケースで    │ ──→ │  プラクティス│
   │              │     │  実際に検証  │     │  を適用      │
   └──────────────┘     └──────────────┘     └──────────────┘
   海外の事例・CVE・       ボットに仮想攻撃      OWASP等の基準で
   アップデート情報を       を仕掛けて             対策を整理・
   収集・分析               弱点を見つける         実装ガイドを作成
```

### 具体的な進め方

| ステップ | やること | 成果物 |
|---------|---------|--------|
| **Step 1** | 海外の脆弱性事例を調査する | 「こんな攻撃がある」事例集 |
| **Step 2** | OpenClawに当てはまるか分析する | 影響分析レポート |
| **Step 3** | 攻撃テストケースを設計する | テスト手順書 |
| **Step 4** | 実際にテスト環境で検証する | 検証結果（PASS/FAIL） |
| **Step 5** | 対策をベストプラクティスとして整理する | セキュリティガイド |
| **Step 6** | OpenClaw本体への改善提案 | PRやIssue |

---

## 攻撃カテゴリ（何を調べるか）

| カテゴリ | どんな攻撃？ | 危険度 |
|---------|-------------|--------|
| [プロンプトインジェクション](vulnerabilities/prompt-injection.md) | メッセージでAIの指示を書き換える | 最高 |
| [サンドボックスエスケープ](vulnerabilities/sandbox-escape.md) | コンテナの隔離を突破してホストに侵入 | 高 |
| [依存関係の脆弱性](vulnerabilities/dependency.md) | npmパッケージに仕込まれた脆弱性 | 高 |
| [認証バイパス](vulnerabilities/auth-bypass.md) | DMペアリングやOAuthの迂回 | 高 |
| [データ漏洩](vulnerabilities/data-leakage.md) | APIキーや会話履歴の流出 | 高 |

---

## 現在の進捗

### 調査済み
- プロンプトインジェクション：8件の主要事例 + OpenClawの現状分析
- OpenClaw公式のセキュリティ体制：160件超のアドバイザリ分析

### 次にやること
- サンドボックスエスケープの事例調査
- OWASP Top 10 for LLMに基づくベストプラクティス整理
- プロンプトインジェクションのテストケース作成
